{%- comment -%}
  Breadcrumb navigation component for better UX and SEO
  Provides clear navigation hierarchy for users
{%- endcomment -%}

{%- unless template == 'index' or template == '404' -%}
<nav class="breadcrumb" aria-label="Breadcrumb navigation" role="navigation">
  <ol class="breadcrumb__list">
    <li class="breadcrumb__item">
      <a href="{{ routes.root_url }}" class="breadcrumb__link">
        <span class="visually-hidden">{{ 'general.breadcrumb.home' | t | default: 'Home' }}</span>
        <svg class="breadcrumb__home-icon" aria-hidden="true" focusable="false" width="16" height="16" viewBox="0 0 16 16">
          <path d="M8 0L0 6v10h5V10h6v6h5V6z"/>
        </svg>
        {{ 'general.breadcrumb.home' | t | default: 'Home' }}
      </a>
    </li>

    {%- case template -%}
      {%- when 'collection' -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ collection.title }}</span>
        </li>

      {%- when 'product' -%}
        {%- if collection -%}
          <li class="breadcrumb__item">
            <a href="{{ collection.url }}" class="breadcrumb__link">{{ collection.title }}</a>
          </li>
        {%- endif -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ product.title }}</span>
        </li>

      {%- when 'blog' -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ blog.title }}</span>
        </li>

      {%- when 'article' -%}
        <li class="breadcrumb__item">
          <a href="{{ blog.url }}" class="breadcrumb__link">{{ blog.title }}</a>
        </li>
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ article.title }}</span>
        </li>

      {%- when 'page' -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ page.title }}</span>
        </li>

      {%- when 'search' -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ 'general.search.title' | t | default: 'Search' }}</span>
        </li>

      {%- when 'cart' -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ 'sections.cart.title' | t | default: 'Cart' }}</span>
        </li>

      {%- when 'customers/account' -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ 'customer.account.title' | t | default: 'Account' }}</span>
        </li>

      {%- when 'customers/order' -%}
        <li class="breadcrumb__item">
          <a href="{{ routes.account_url }}" class="breadcrumb__link">{{ 'customer.account.title' | t | default: 'Account' }}</a>
        </li>
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ 'customer.order.title' | t | default: 'Order' }} {{ order.name }}</span>
        </li>

      {%- else -%}
        <li class="breadcrumb__item">
          <span class="breadcrumb__current" aria-current="page">{{ page_title }}</span>
        </li>
    {%- endcase -%}
  </ol>
</nav>

<style>
  .breadcrumb {
    padding: var(--padding-sm) 0;
    margin-bottom: var(--margin-md);
  }

  .breadcrumb__list {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: var(--font-size-sm);
  }

  .breadcrumb__item {
    display: flex;
    align-items: center;
  }

  .breadcrumb__item:not(:last-child)::after {
    content: '/';
    margin: 0 var(--margin-xs);
    color: var(--color-foreground-muted);
    font-weight: 300;
  }

  .breadcrumb__link {
    color: var(--color-foreground-muted);
    text-decoration: none;
    transition: color 0.2s ease;
    display: flex;
    align-items: center;
    gap: var(--gap-2xs);
  }

  .breadcrumb__link:hover,
  .breadcrumb__link:focus {
    color: var(--color-primary);
    text-decoration: underline;
  }

  .breadcrumb__current {
    color: var(--color-foreground);
    font-weight: 500;
  }

  .breadcrumb__home-icon {
    width: 14px;
    height: 14px;
    fill: currentColor;
  }

  /* Responsive adjustments */
  @media screen and (max-width: 749px) {
    .breadcrumb {
      padding: var(--padding-xs) 0;
      margin-bottom: var(--margin-sm);
    }

    .breadcrumb__list {
      font-size: var(--font-size-xs);
    }

    .breadcrumb__home-icon {
      width: 12px;
      height: 12px;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .breadcrumb__link {
      text-decoration: underline;
    }
  }
</style>
{%- endunless -%}
